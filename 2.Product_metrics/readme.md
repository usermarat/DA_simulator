# Задание 1
В наших данных использования ленты новостей есть два типа юзеров: те, кто пришел через платный трафик source = 'ads', и те, кто пришел через органические каналы source = 'organic'.

Ваша задача — проанализировать и сравнить Retention этих двух групп пользователей. 
Решением этой задачи будет ответ на вопрос: отличается ли характер использования приложения у этих групп пользователей. 

# Ответ
Характер использования приложения у двух групп (платно/органика) существенно различаются - показатель Retention Rate (RR) у "рекламных" пользователей гораздо хуже (ниже) "органических".
Это можно видеть на следующих графиках RR, рассчитанных в разрезе данных двух групп 
(по оси Х - когорты новых пользователей по дате начала использования приложения, по оси У - RR в процентах):
* на 10ый день:

![10th-day-retention-rate](https://github.com/usermarat/DA_simulator/assets/87779469/567971c5-a07a-4943-a791-196106200873)

* на 30ый день:

![30-day-retention-rate](https://github.com/usermarat/DA_simulator/assets/87779469/7d16e7c7-5be7-4ef8-a2b7-7703114abc45)
 
* за 2ую неделю:

![1st-week-range-retention-rate](https://github.com/usermarat/DA_simulator/assets/87779469/80892047-8a35-4d39-aada-002d0e2dee0e)
 
* за 6ую неделю:

![5th-week-range-retention-rate](https://github.com/usermarat/DA_simulator/assets/87779469/4ffe198e-312d-4d5b-a60a-6a4c65d4bd09)

Кроме того, различие косвенно заметно по тепловым картам - по органике тепловая карта более темная в начале и к концу периода она светлеет не так сильно, как по рекламе:
* органика:

![retention-organic](https://github.com/usermarat/DA_simulator/assets/87779469/811330c2-9537-4035-b1b1-48fd5cc38e23)
 
* реклама:

![retention-ads](https://github.com/usermarat/DA_simulator/assets/87779469/f2c5e421-abe2-49f8-877e-2a3e48dd7da4)

[Запросы в Click House для построения графиков](https://github.com/usermarat/DA_simulator/blob/main/2.Product_metrics/rr_querries.sql)

# Задание 2

Маркетологи запустили массивную рекламную кампанию, в результате в приложение пришло довольно много новых пользователей, вы можете видеть всплеск на графике активной аудитории.

Однако у нас есть сомнение в качестве трафика, изучите, что стало с рекламными пользователями в дальнейшем, как часто они продолжают пользоваться приложением?

# Ответ

Всплеск притока рекламной аудитории идентифицирован на 13.06.23:

![4-2-marketing-campaign](https://github.com/usermarat/DA_simulator/assets/87779469/7b50e96c-5320-45e0-92b1-05e25cbea020)

Однако качество данной аудитории с точки зрения показателя Retention оказалось чрезвычайно низким - по данному графику можно посмотреть на динамику количества новых пользователей, пришедших 13го июня, в разрезе источников (DAU по когорте новых пользователей 13.06.23):

![4-2-campaign-results](https://github.com/usermarat/DA_simulator/assets/87779469/05c51a31-4ff1-459b-82d9-d1ffebd42cb3)

В целом, уже на второй день 14.06 можно видеть, что из всего количества данных новых "рекламных" пользователей в 3,69 тыс. чел. приложением пользовалось только 106 чел., что соответствует RR 2,8 %.

На самом деле, это уже было заметно из графиков, построенных на предыдущем задании, в частности, виден провал по 10th day RR как раз по когорте 13.06, и это самое худшее значение за весь период (2,03% против второго самого низкого значения по графику 10,94%). Аналогично провал по недельному RR видим по той же когорте.

[Запрос в Click House для построения графика](https://github.com/usermarat/DA_simulator/blob/main/2.Product_metrics/mark_camp_query.sql)

# Задание 3

Мы наблюдаем внезапное падение активной аудитории! Нужно разобраться, какие пользователи не смогли зайти в приложение, что их объединяет?  

# Ответ

На том же графике с предыдущего ответа можно идентифицировать и провал активной аудитории, и сразу сделать вывод, что это не связано с трафиком (падение от 22.06.23 произошло по обеим группам).

Так же в первую очередь были проанализированы показатели активной аудитории в разрезе операционных систем используемых приложений с целью исключения технических неполадок - снижения наблюдались по обоим группам:

![4-3-drop-investigation-os](https://github.com/usermarat/DA_simulator/assets/87779469/3307f465-8479-4a6d-94e5-c8ea468ebf4a)

Далее были проанализированы данные показатели по географическому признаку в разрезе стран - по крупнейшим странам показатели оказались стабильными, за исключением аудитории России:

![4-3-drop-investigation-country-all](https://github.com/usermarat/DA_simulator/assets/87779469/377deb22-3381-417e-98e8-9530a3406caa)

DAU по России:

![4-3-drop-investigation-country-rus](https://github.com/usermarat/DA_simulator/assets/87779469/c2359c6e-4fa4-40c6-9f1a-73631e963c77)

С помощью [данного запроса](https://github.com/usermarat/DA_simulator/blob/main/2.Product_metrics/drop_query.sql) была сформирована следующая таблица, из которой видно, что 22.06 в приложении полностью отсутствовали какие-либо пользователи из 4х крупных городов:

city | day_21 | day_22 | delta
--- | --- | --- | ---
Moscow	| 2319	| 0	| 2319
Saint Petersburg	| 764	| 0	| 764
Novosibirsk	| 213	| 0	| 213
Yekaterinburg	| 210	| 0	| 210
Chelyabinsk	| 195	| 155	| 40
Yaroslavl	| 92	| 73	| 19

Дополнительно это наглядно видно по данному графику: 

![4-3-drop-investigation-5](https://github.com/usermarat/DA_simulator/assets/87779469/4482986d-6c58-4e5b-bc03-2dda541a00c7)

# Задание 4

Требует составить запрос и построить следующий график, который позволяет взглянуть на активную аудиторию с точки зрения новых, старых и ушедших пользователей:

![4-4-retention](https://github.com/usermarat/DA_simulator/assets/87779469/91a9500b-ac2e-4009-b7cb-67f14b06a272)

На графике отображена активная аудитория по неделям, для каждой недели выделены три типа пользователей:

* Новые — первая активность в ленте была на этой неделе.
* Старые — активность была и на этой, и на прошлой неделе.
* Ушедшие — активность была на прошлой неделе, на этой не было.

# Ответ

Для построения графика были использован [данный запрос](https://github.com/usermarat/DA_simulator/blob/main/2.Product_metrics/user_type_query.sql).
